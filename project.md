# Windows 桌面任务管理软件开发文档（轻量级 · 本地保存 · 自动恢复）

## 项目目标

开发一款轻量级 Windows 桌面应用程序（`.exe`），用于每日任务表格管理，支持多标签、字段自定义、自动保存与恢复、本地存储、开机自启，无需后端与数据库，界面简洁、运行快速、适合长期使用。

---

## 技术方案

| 项目 | 选型 |
|------|------|
| 主语言 | C# |
| 框架 | WinForms (.NET 6+) |
| IDE | Visual Studio Community |
| 存储方式 | 本地 JSON 文件（每次操作自动保存） |
| 图片存储 | 存储为本地文件 + JSON 路径引用 |
| 打包方式 | Visual Studio 发布功能 / ClickOnce |
| 开机启动 | 注册表自启动（或复制快捷方式到启动文件夹） |

---

## 功能模块设计

### 1. 多标签页（Tab）系统

- 支持任意创建多个任务表标签（Tab）
- 每个标签代表一个任务表（表结构和数据独立）
- 标签可重命名 / 关闭 / 切换
- 启动时自动恢复上次打开的所有标签页和内容

### 2. 自定义字段支持

每个表格支持多个字段列，自定义字段类型包括：

| 字段类型 | 描述 |
|----------|------|
| 文本输入 | 自由输入内容 |
| 单选（状态标记） | 自定义选项 + 颜色（如：未开始/进行中/完成） |
| 多选标签 | 可勾选多个分类，如“紧急/今日/延后” |
| 图片上传 | 上传本地图片显示于单元格内，存储路径保存至 JSON |

可操作：

- 添加 / 删除列
- 修改列名与字段类型
- 列顺序调整（可选）

### 3. 表格内容管理（每行为一项任务）

- 可添加 / 删除行
- 各字段单元格均可实时编辑
- 支持图标按钮打开图片预览或放大查看

### 4. 自动保存与本地数据结构

- 所有操作自动保存，无需手动点击
- 数据保存路径：`%APPDATA%\TaskBoard\data.json`
- 采用 `debounce` 策略避免频繁写入

### 5. 开机自启动功能

- 自动添加注册表项：`HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run`
- 或在 `C:\Users\<用户名>\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup` 中添加快捷方式
- 用户可在设置中开启 / 关闭此功能

### 6. 用户设置与持久化内容

- 所有以下内容将在下次启动时自动恢复：
  - 所有标签页名称及数量
  - 每个表格的字段定义、字段类型
  - 所有任务项数据
  - 各字段的选项配置（颜色、值）
  - 应用窗口尺寸与位置（可选）

---

## 数据结构示例（JSON）

```json
{
  "tabs": [
    {
      "id": "tab1",
      "name": "每日计划",
      "columns": [
        { "id": "c1", "name": "任务", "type": "text" },
        { "id": "c2", "name": "状态", "type": "single", "options": [
          { "label": "未开始", "color": "#ccc" },
          { "label": "进行中", "color": "#f90" },
          { "label": "已完成", "color": "#0c0" }
        ]},
        { "id": "c3", "name": "标签", "type": "multi", "options": ["重要", "学习", "明天"] },
        { "id": "c4", "name": "截图", "type": "image" }
      ],
      "rows": [
        {
          "id": "r1",
          "data": {
            "c1": "写日报",
            "c2": "进行中",
            "c3": ["重要", "学习"],
            "c4": "images/2025-07-24-1.png"
          }
        }
      ]
    }
  ]
}




v3版本功能：
1、增加todolist列可选，todolist就是可以每一行都手动添加多个todo项并且每项可以设置完成，todo项会直接列表形式显示在列中，不需要点开查看和操作
2、

我注意到所有的标签页面都是保存在一个json文件中的，这样的话如果当标签文件非常大的时候，是不是会有性能问题？需要增加一个一键切割的功能，这个功能放在底部，点击之后将整个json保存为备份，并创建一个新的空白配置，然后同样要有一个恢复备份的功能，点击恢复备份可以读取已切割的备份配置，要显示备份时间，选择指定备份并确认后，则自动将当前启用的配置进行备份，并将选择备份设为启用，这样又回到了备份版本

既然直接在标签栏对标签拖拽排序实现比较复杂，那就将底部的显示隐藏标签页改为标签管理，在里面展示出所有的标签，并且可以对标签进行排序，以及可以对隐藏的标签进行恢复，也可以将标签设为隐藏，或者删除，还可以增加标签，相当于一个统一的管理，但是顶部的添加和删除功能依旧保留

文本域不需要手动保存，实时自动保存


BfTaskBoard

1、搜索功能：输入关键词，从所有标签中搜索包含这个关键词的表，并有一个反馈显示，可以看到那些表的那一列出现这个内容，可以点击快速定位到那里
2、单选的列，在表头出增加一个筛选的小图标（鼠标悬浮时才显示），点击筛选可以筛选某一个或多个选项的记录（注意这个排序是临时的，并不会永久改变配置中的实际排序）
3、文本输入框的列，增加一个排序功能，可选倒序或者正序，选择后对数据按照这个字段进行排序显示（注意这个排序是临时的，并不会永久改变配置中的实际排序）
4、在标签管理的弹窗中，右侧操作增加一拦：快速新建，就是利用选中拦的列配置快速新建一张空白标签页
5、标签页前面添加一个dot圆点，并可以为dot设置不同的颜色，这样方便快速区分
6、每个表的右下角显示一个浅色的修改时间时间戳，这个时间自动监控
7、添加图片的时候，支持粘贴图片（ctrl+v）,弹窗中要有明显提示支持粘贴图片
8、添加几项快捷操作
  Ctrl+T 新建标签页（出现新建页的输入标签弹窗）
  Ctrl+Q 切换当前tab页（按顺序切换）
  Ctrl+S 保存（虽然我们是自动保存，但还是保留手动保存的功能，并且触发时右下角的时间戳高亮并加上已保存文字保持3s）
9、程序的名称改为： BfTaskBoard  构建时的图标使用 favicon.ico 


可以切换主题：light / dark light则由现在的暗黑风格改为亮色风格


1、移除所有的运行脚本，仅保留一个最终的构建bat
2、移除所有的测试内容
3、移除无用的文件
4、更新README文件，完整的介绍本软件的主要功能、使用方法、技术要点、构建方法 （本项目将在github开源）
5、创建推送到github并公开的必要说明或配置文件

再实现最后一个功能：AI建表
1、暂时支持支持openai、deepseek两家接口
2、客户自己选择接口提供商，输入自己的key(需保存供下次直接使用)
3、输入需求并点击提交
4、提交到api接口，提示词需要让AI根据需求生成一个符合我们系统配置格式的空白表，并创建一条示例数据
